.TH ORBTOPO 1 "$Date$"
.SH NAME
orbtopo \- Create topology plots of orb interconnectivity
.SH SYNOPSIS
.nf
orbtopo [-v] [-p pfname]  dbname targetdir
.fi
.SH DESCRIPTION
The orbtopo program monitors a Datascope database in registry1.2 or higher format, 
which should contain monitoring results from the pforbstat(1) program archived by 
the orbpf2db(1) program. The orbtopo program updates a set of graphs in the target-directory
showing current orb connectivity. 

.SH OPTIONS
.IP "-p pfname"
Use an alternate parameter file, as specified. The default is \fIorbtopo.pf\fP.

.IP -v
Verbose

.SH FILES
.SH ENVIRONMENT
.SH PARAMETER FILE
.IP outputs
This parameter gives a table of output files to be generated by \fBorbtopo\fP. Each file 
is given to the GraphViz program specified by the \fIgraph_program\fP parameter. The 
GraphViz program understands a number of common output formats, specified by file extension, 
such as \fI.dot\fP for dot-file graph descriptions; \fI.cmapx\fP for client-side image 
map files corresponding to rasterized images; \fI.gif\fP, \fI.png\fP, \fI.jpg\fP, etc. For
further information see the GraphViz documentation.

.IP graph_program
This parameter gives the name of the GraphViz layout program to use to generate graphs. 
Common exampes are \fIdot\fP, \fIneatofP, and \fPtwopi\fI. For further information on the 
properties of these layout tools, see the GraphViz documentation. 
.IP valid_twin_sec
This parameter controls whether the connections table is subsetted based on time. If 
\fIvalid_twin_sec\fP is 0, all connection entries are used. If \fIvalid_twin_sec\fP is 
nonzero, the connection table is subsetted for connections within \fIvalid_twin_sec\fP
of the system clock time (based on the \fIconnections.when\fP database field). 
.IP colors
This array specifies what colors to use for various output figures. Currently only
two types of figures are controllable, \fImonitored\fP for orbservers that are 
fully monitored by instances of pforbstat(1), and \fIfringe\fP for orbservers that are 
at the fringe of the monitored network (visible because of their connectivity to monitored
orbs) but which do not have direct pforbstat(1) data available in the database. 
.IP graph_attributes
This array specifies GraphViz attributes to be applied to the entire graph. For 
further information  on the parameters that may be specified, see the GraphViz 
documentation. 
.IP node_attributes
This array specifies GraphViz attributes to be applied to all nodes in the graph. For 
further information  on the parameters that may be specified, see the GraphViz 
documentation. 
.IP edge_attributes
This array specifies GraphViz attributes to be applied to all edges in the graph. For 
further information  on the parameters that may be specified, see the GraphViz 
documentation. 

.SS Example Parameter File:

.nf


outputs &Tbl{
	grid.dot
	grid.png
	grid.cmapx
	grid.svg
}

valid_twin_sec 0

graph_program 	twopi

colors &Arr{
	monitored	lightgoldenrod1
	fringe		grey
}

graph_attributes &Arr{
	name		Orb Topology Map
	overlap		false
	ratio		1.3
	ranksep		3
}

node_attributes &Arr{
	style		filled
	shape		hexagon
	fillcolor	green
	fontcolor	\#000000
}

edge_attributes &Arr{
	dir		forward
	color		blue
}
.fi
.SH EXAMPLE
.in 2c
.ft CW
.nf
.fi
.ft R
.in
.SH RETURN VALUES
.SH LIBRARY
The orbtopo program requires the Python PyGraphviz package to be installed from 
http://networkx.lanl.gov (and, of course, the underlying GraphViz package from 
http://www.graphviz.org). It also requires the \fIpylab\fP package from 
http://matplotlib.sourceforge.net and any of its subsidiary dependencies as documented.
For further information on installing and managing Python and Python libraries, 
see the Python documentation e.g. through http://www.python.org. 

.SH DIAGNOSTICS
.SH "SEE ALSO"
.nf
pforbstat(1), orbpf2db(1), rtexec(1)

http://networkx.lanl.gov
http://www.graphviz.org

.fi

Graphviz output may also be viewed with the ZGR Viewer, which has both command-line
and Java-applet viewers for dot files and scalable 
vector graphics: http://zvtm.sourceforge.net/zgrviewer.html

A Macintosh GUI-based version of the graphviz software, useful for viewing output
graph files, is available at http://www.graphviz.org/Download_macos.php

.SH "BUGS AND CAVEATS"

orbtopo will process database tables with non-routable IP addresses in them. 
However, there is an assumption that no non-routable address appears more 
than once across the entire set of orbservers being monitored. 

.SH AUTHOR
.nf
Kent Lindquist
Lindquist Consulting, Inc. 

following previous prototype work by Todd Hansen (UCSD/ROADNet, now amazon.com) and Kent Lindquist
.fi
.\" $Id$
